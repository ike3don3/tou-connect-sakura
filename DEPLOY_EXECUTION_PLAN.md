# 🚀 TOU Connect デプロイ実行プラン

## 📊 現在の状況
- ✅ VPS IPアドレス確認: **153.127.55.224**
- ✅ ドメイン取得完了: **touconnect.jp**
- ✅ デプロイスクリプト準備完了
- 🔄 **次: SSH接続設定 + DNS設定**

## 🎯 実行手順（推奨順序）

### フェーズ1: DNS設定 (今すぐ実行可能)
お名前.com管理画面で以下を設定：

```
ホスト名: @
TYPE: A
VALUE: 153.127.55.224

ホスト名: www  
TYPE: A
VALUE: 153.127.55.224
```

**理由**: DNS反映に時間がかかるため、最初に設定しておく

### フェーズ2: SSH接続設定
```bash
# 1. SSH鍵生成（まだない場合）
ssh-keygen -t rsa -b 4096 -C "touconnect-vps"

# 2. 公開鍵表示
cat ~/.ssh/id_rsa.pub

# 3. さくらVPS管理画面で公開鍵を登録 または
#    パスワード認証で初回接続して手動設定
```

### フェーズ3: VPS初期設定
```bash
# SSH接続確認
ssh root@153.127.55.224 "echo 'SSH接続成功'"

# 初期設定スクリプト転送・実行
scp vps_initial_setup.sh root@153.127.55.224:/tmp/
ssh root@153.127.55.224 "bash /tmp/vps_initial_setup.sh"
```

### フェーズ4: アプリケーションデプロイ
```bash
# 自動デプロイスクリプト実行
./deploy_to_vps.sh 153.127.55.224
```

### フェーズ5: DNS反映確認・SSL設定
```bash
# DNS反映確認
dig touconnect.jp A

# SSL設定（DNS反映後）
ssh touconnect@153.127.55.224 "./setup_dns_ssl.sh"
```

## ⏰ 予想所要時間

| フェーズ | 作業時間 | 待機時間 |
|---------|---------|---------|
| DNS設定 | 5分 | 30分〜48時間 |
| SSH設定 | 10分 | - |
| VPS初期設定 | 15分 | - |
| アプリデプロイ | 10分 | - |
| SSL設定 | 5分 | - |
| **合計** | **45分** | **最大48時間** |

## 🎯 成功判定基準

### 中間目標
- [ ] SSH接続成功
- [ ] VPS初期設定完了
- [ ] アプリケーションデプロイ完了
- [ ] HTTP接続確認 (http://153.127.55.224)

### 最終目標
- [ ] DNS反映確認 (dig touconnect.jp)
- [ ] HTTPS接続成功 (https://touconnect.jp)
- [ ] 全機能動作確認

## 🚨 注意事項

### セキュリティ
- rootログインは初期設定後に無効化される
- SSH鍵認証のみに制限される
- ファイアウォール設定が適用される

### DNS設定
- 反映に最大48時間かかる場合がある
- 設定直後はまだアクセスできない
- IPアドレス直接アクセスでテスト可能

### バックアップ
- 自動デプロイ時に既存ファイルがバックアップされる
- データベースも自動バックアップされる

## 📞 準備完了チェックリスト

- [ ] さくらVPS管理画面にログイン可能
- [ ] お名前.com管理画面にログイン可能
- [ ] ローカルでSSH鍵が利用可能
- [ ] インターネット接続安定

---

## 🚀 **開始準備完了！**

**次のアクション**: 
1. お名前.comでDNS設定
2. SSH接続設定
3. 自動デプロイ実行

**予想完了時間**: DNS反映後に即座にサービス開始可能

---

**IPアドレス**: 153.127.55.224  
**ドメイン**: touconnect.jp  
**ステータス**: 🟢 実行準備完了
